---
import { type FragmentOf, readFragment } from '~/lib/datocms/graphql';
import { VideoBlockFragment } from './fragments';
import { YouTube } from 'astro-embed';

interface Props {
  block: FragmentOf<typeof VideoBlockFragment>;
}

const { block } = Astro.props;

// Read unmasked block from fragment
const unmaskedBlock = readFragment(VideoBlockFragment, block) as { video: { url: string } };
---

<figure>
  <YouTube id={unmaskedBlock.video.url} />
  <figcaption>{unmaskedBlock.video.url}</figcaption>
</figure>
